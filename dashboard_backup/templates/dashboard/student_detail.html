<!-- dashboard/templates/dashboard/student_detail.html -->
{% extends 'dashboard/base.html' %}
{% load static %}
{% block title %}{{ student.student_name }} - Details{% endblock %}

{% block content %}
<style>
    body { margin: 0; padding: 0; font-family: 'Courier New', monospace; background-color: #000; color: #0f0; overflow-x: hidden; }
    #matrix-canvas { position: fixed; top: 0; left: 0; width: 100%; height: 100%; z-index: -1; }

    .detail-container {
        position: relative;
        z-index: 2;
        padding: 30px;
        width: 100%;
        max-width: 1200px;
        margin: 0 auto;
    }

    .back-button {
        margin-bottom: 20px;
    }

    .back-link {
        color: #0f0;
        text-decoration: none;
        font-weight: bold;
        display: inline-flex;
        align-items: center;
        gap: 10px;
        padding: 10px 20px;
        background: rgba(0, 20, 0, 0.8);
        border: 2px solid #0f0;
        border-radius: 8px;
        transition: all 0.3s;
    }

    .back-link:hover {
        background: #0f0;
        color: #000;
    }

    .student-card {
        background: rgba(0, 20, 0, 0.9);
        border: 3px solid #0f0;
        border-radius: 15px;
        padding: 30px;
        box-shadow: 0 0 30px rgba(0, 255, 0, 0.3);
    }

    .student-header {
        display: flex;
        gap: 30px;
        margin-bottom: 30px;
        flex-wrap: wrap;
    }

    .student-photo-large {
        width: 200px;
        height: 200px;
        border-radius: 10px;
        object-fit: cover;
        border: 3px solid #0f0;
        box-shadow: 0 0 20px rgba(0, 255, 0, 0.5);
    }

    .photo-placeholder {
        width: 200px;
        height: 200px;
        border-radius: 10px;
        background: linear-gradient(135deg, #001a00, #003300);
        border: 3px solid #0f0;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 4rem;
        color: #0f0;
    }

    .student-info {
        flex: 1;
    }

    .student-name {
        font-size: 2.5rem;
        color: #0f0;
        margin-bottom: 10px;
        text-shadow: 0 0 10px #0f0;
    }

    .student-id {
        color: #aaa;
        font-size: 1.2rem;
        margin-bottom: 20px;
    }

    .info-grid {
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
        gap: 20px;
    }

    .info-section {
        background: rgba(0, 10, 0, 0.7);
        border: 1px solid rgba(0, 255, 0, 0.3);
        border-radius: 8px;
        padding: 20px;
    }

    .section-title {
        color: #0f0;
        font-size: 1.3rem;
        margin-bottom: 15px;
        padding-bottom: 8px;
        border-bottom: 2px solid #0f0;
        text-transform: uppercase;
        letter-spacing: 1px;
    }

    .info-row {
        display: flex;
        margin-bottom: 10px;
        padding-bottom: 8px;
        border-bottom: 1px dashed rgba(0, 255, 0, 0.1);
    }

    .info-label {
        flex: 1;
        color: #aaa;
        font-weight: bold;
        text-transform: uppercase;
        font-size: 0.85rem;
        letter-spacing: 0.5px;
    }

    .info-value {
        flex: 2;
        color: #ddd;
        font-size: 1rem;
    }

    .file-links {
        display: flex;
        flex-wrap: wrap;
        gap: 10px;
        margin-top: 10px;
    }

    .file-link {
        display: inline-block;
        padding: 5px 15px;
        background: rgba(0, 30, 0, 0.8);
        color: #0f0;
        border: 1px solid #0f0;
        border-radius: 4px;
        text-decoration: none;
        font-size: 0.9rem;
        transition: all 0.3s;
    }

    .file-link:hover {
        background: #0f0;
        color: #000;
    }

    .file-link.disabled {
        opacity: 0.5;
        cursor: not-allowed;
        background: rgba(50, 50, 50, 0.8);
        border-color: #555;
        color: #777;
    }

    .action-buttons {
        display: flex;
        justify-content: center;
        gap: 20px;
        margin-top: 40px;
        padding-top: 30px;
        border-top: 2px solid rgba(0, 255, 0, 0.3);
    }

    .action-btn {
        padding: 12px 30px;
        border: none;
        border-radius: 8px;
        font-weight: bold;
        font-size: 1rem;
        cursor: pointer;
        transition: all 0.3s;
        text-decoration: none;
        display: inline-flex;
        align-items: center;
        gap: 10px;
    }

    .btn-print {
        background: linear-gradient(135deg, #001a00, #003300);
        color: #0f0;
        border: 2px solid #0f0;
    }

    .btn-print:hover {
        background: linear-gradient(135deg, #003300, #00aa00);
        box-shadow: 0 0 20px rgba(0, 255, 0, 0.5);
    }

    .btn-export {
        background: linear-gradient(135deg, #1a001a, #330033);
        color: #f0f;
        border: 2px solid #f0f;
    }

    .btn-export:hover {
        background: linear-gradient(135deg, #330033, #aa00aa);
        box-shadow: 0 0 20px rgba(255, 0, 255, 0.5);
    }
</style>

<canvas id="matrix-canvas"></canvas>

<div class="detail-container">
    <div class="back-button">
        <a href="{% url 'dashboard:students_data' %}" class="back-link">
            ‚Üê BACK TO STUDENTS LIST
        </a>
    </div>

    <div class="student-card">
        <div class="student-header">
            <div>
                {% if student.photo %}
                <img src="{{ student.photo.url }}" alt="{{ student.student_name }}" class="student-photo-large">
                {% else %}
                <div class="photo-placeholder">
                    {{ student.student_name|first|upper }}
                </div>
                {% endif %}
            </div>

            <div class="student-info">
                <h1 class="student-name">{{ student.student_name }}</h1>
                <div class="student-id">Hall Ticket No: <strong>{{ student.ht_no }}</strong></div>
                <div class="student-id">Year {{ student.year }} - Semester {{ student.sem }}</div>
                <div class="student-id">Registered: {{ student.registration_date|date:"F d, Y" }}</div>
            </div>
        </div>

        <div class="info-grid">
            <!-- Personal Information -->
            <div class="info-section">
                <h3 class="section-title">Personal Information</h3>
                <div class="info-row">
                    <div class="info-label">Father Name:</div>
                    <div class="info-value">{{ student.father_name }}</div>
                </div>
                <div class="info-row">
                    <div class="info-label">Mother Name:</div>
                    <div class="info-value">{{ student.mother_name }}</div>
                </div>
                <div class="info-row">
                    <div class="info-label">Gender:</div>
                    <div class="info-value">{{ student.gender }}</div>
                </div>
                <div class="info-row">
                    <div class="info-label">Date of Birth:</div>
                    <div class="info-value">{{ student.dob }} (Age: {{ student.age }})</div>
                </div>
                <div class="info-row">
                    <div class="info-label">Category:</div>
                    <div class="info-value">{{ student.category }}</div>
                </div>
                <div class="info-row">
                    <div class="info-label">Aadhar No:</div>
                    <div class="info-value">{{ student.aadhar }}</div>
                </div>
            </div>

            <!-- Contact Information -->
            <div class="info-section">
                <h3 class="section-title">Contact Information</h3>
                <div class="info-row">
                    <div class="info-label">Student Phone:</div>
                    <div class="info-value">{{ student.student_phone }}</div>
                </div>
                <div class="info-row">
                    <div class="info-label">Parent Phone:</div>
                    <div class="info-value">{{ student.parent_phone }}</div>
                </div>
                <div class="info-row">
                    <div class="info-label">Email:</div>
                    <div class="info-value">{{ student.email }}</div>
                </div>
                <div class="info-row">
                    <div class="info-label">Address:</div>
                    <div class="info-value" style="white-space: pre-line;">{{ student.address }}</div>
                </div>
            </div>

            <!-- Academic Information -->
            <div class="info-section">
                <h3 class="section-title">Academic Information</h3>
                <div class="info-row">
                    <div class="info-label">Admission Type:</div>
                    <div class="info-value">{{ student.admission_type }}</div>
                </div>
                {% if student.other_admission_details %}
                <div class="info-row">
                    <div class="info-label">Admission Details:</div>
                    <div class="info-value">{{ student.other_admission_details }}</div>
                </div>
                {% endif %}
                <div class="info-row">
                    <div class="info-label">SSC Marks:</div>
                    <div class="info-value">{{ student.ssc_marks|default:"Not provided" }}%</div>
                </div>
                <div class="info-row">
                    <div class="info-label">Inter Marks:</div>
                    <div class="info-value">{{ student.inter_marks|default:"Not provided" }}%</div>
                </div>
                <div class="info-row">
                    <div class="info-label">Current CGPA:</div>
                    <div class="info-value">{{ student.cgpa|default:"Not provided" }}</div>
                </div>
            </div>

            <!-- Projects & Internships -->
            <div class="info-section">
                <h3 class="section-title">Projects & Internships</h3>
                {% if student.rtrp_title %}
                <div class="info-row">
                    <div class="info-label">RTRP Project:</div>
                    <div class="info-value">{{ student.rtrp_title }}</div>
                </div>
                {% endif %}
                {% if student.intern_title %}
                <div class="info-row">
                    <div class="info-label">Internship:</div>
                    <div class="info-value">{{ student.intern_title }}</div>
                </div>
                {% endif %}
                {% if student.final_project_title %}
                <div class="info-row">
                    <div class="info-label">Final Project:</div>
                    <div class="info-value">{{ student.final_project_title }}</div>
                </div>
                {% endif %}
                {% if student.other_training %}
                <div class="info-row">
                    <div class="info-label">Other Training:</div>
                    <div class="info-value">{{ student.other_training }}</div>
                </div>
                {% endif %}
            </div>

            <!-- Certificates & Documents -->
            <div class="info-section">
                <h3 class="section-title">Certificates & Documents</h3>
                <div class="file-links">
                    {% if student.cert_achieve %}
                    <a href="{{ student.cert_achieve.url }}" class="file-link" target="_blank">Achievements</a>
                    {% else %}
                    <span class="file-link disabled">Achievements</span>
                    {% endif %}

                    {% if student.cert_intern %}
                    <a href="{{ student.cert_intern.url }}" class="file-link" target="_blank">Internship</a>
                    {% else %}
                    <span class="file-link disabled">Internship</span>
                    {% endif %}

                    {% if student.cert_courses %}
                    <a href="{{ student.cert_courses.url }}" class="file-link" target="_blank">Courses</a>
                    {% else %}
                    <span class="file-link disabled">Courses</span>
                    {% endif %}

                    {% if student.cert_sdp %}
                    <a href="{{ student.cert_sdp.url }}" class="file-link" target="_blank">SDP</a>
                    {% else %}
                    <span class="file-link disabled">SDP</span>
                    {% endif %}

                    {% if student.cert_extra %}
                    <a href="{{ student.cert_extra.url }}" class="file-link" target="_blank">Extracurricular</a>
                    {% else %}
                    <span class="file-link disabled">Extracurricular</span>
                    {% endif %}

                    {% if student.cert_placement %}
                    <a href="{{ student.cert_placement.url }}" class="file-link" target="_blank">Placements</a>
                    {% else %}
                    <span class="file-link disabled">Placements</span>
                    {% endif %}

                    {% if student.cert_national %}
                    <a href="{{ student.cert_national.url }}" class="file-link" target="_blank">National Exams</a>
                    {% else %}
                    <span class="file-link disabled">National Exams</span>
                    {% endif %}
                </div>
            </div>
        </div>

        <div class="action-buttons">
            <button onclick="window.print()" class="action-btn btn-print">
                üñ®Ô∏è PRINT PROFILE
            </button>
            <a href="#" class="action-btn btn-export">
                üì• EXPORT AS PDF
            </a>
        </div>
    </div>
</div>

<script>
    // Matrix Animation
    const canvas = document.getElementById('matrix-canvas');
    const ctx = canvas.getContext('2d');
    canvas.width = window.innerWidth;
    canvas.height = window.innerHeight;

    const chars = '0123456789ANURAGITDEPT';
    const fontSize = 16;
    const columns = canvas.width / fontSize;
    const drops = Array(Math.floor(columns)).fill(1);

    function draw() {
        ctx.fillStyle = 'rgba(0, 0, 0, 0.05)';
        ctx.fillRect(0, 0, canvas.width, canvas.height);
        ctx.fillStyle = '#0f0';
        ctx.font = fontSize + 'px monospace';
        for (let i = 0; i < drops.length; i++) {
            const text = chars[Math.floor(Math.random() * chars.length)];
            ctx.fillText(text, i * fontSize, drops[i] * fontSize);
            if (drops[i] * fontSize > canvas.height && Math.random() > 0.975) drops[i] = 0;
            drops[i]++;
        }
    }
    setInterval(draw, 33);

    window.addEventListener('resize', () => {
        canvas.width = window.innerWidth;
        canvas.height = window.innerHeight;
    });
</script>
{% endblock %}